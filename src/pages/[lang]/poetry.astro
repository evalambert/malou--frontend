---
//pages/poetry.astro

import fetchApi from "../../lib/strapi";
import Layout from "../../layouts/Layout.astro";
import Nav from "../../layouts/Nav.jsx";
import PoetryList from "../../layouts/projects-lists/Poetry-list.jsx";

export async function getStaticPaths() {
  return [{ params: { lang: "fr" } }, { params: { lang: "en" } }];
}

const { lang } = Astro.params;

const poetries = await fetchApi({
  endpoint: "poetries?populate=*",
  wrappedByKey: "data",
  locale: lang,
});

export const prerender = true;
---

<Layout title="Poetry" showReturn returnTo="">
  <main>
    <Nav
      lang={lang}
      currentPath={Astro.url.pathname}
      transition:name="nav"
      transition:persist
      client:load
    />
    <PoetryList
      targetHref={`/poetry/`}
      lang={lang}
      dataPoetry={poetries}
      isOnPoetryPage={true}
      transition:name="poetrylist"
      transition:persist
      client:load
    />

  </main>
</Layout>
