---
//pages/[lang]/about.astro
import fetchApi from '../../assets/scripts/lib/strapi.js';
import Layout from '../../layouts/Layout.astro';
import Nav from '../../layouts/Nav.jsx';
import AboutComponent from '../../layouts/about-page/AboutComponent.jsx';
import ActuComponent from '../../layouts/about-page/ActuComponent.jsx';
import MobileButtons from '../../components/common/MobileButtons.jsx';
import WrapperHeight from '../../layouts/about-page/WrapperHeight.jsx';

export async function getStaticPaths() {
    return [{ params: { lang: 'fr' } }, { params: { lang: 'en' } }];
}

const { lang } = Astro.params;

const about = await fetchApi({
    endpoint: 'about?populate=*',
    wrappedByKey: 'data',
    locale: lang,
});

const actus = await fetchApi({
    endpoint: 'actus?populate=*',
    wrappedByKey: 'data',
    locale: lang,
});

export const prerender = true;
---

<Layout title='About' showReturn returnTo=''>
    <Nav
        className='md:fixed md:top-0 md:left-[15px] rounded-[4px] z-[999] mix-blend-target'
        lang={lang}
        currentPath={Astro.url.pathname}
        transition:name='nav'
        transition:persist
        client:load
    />
    <MobileButtons lang={lang} client:load />
    <WrapperHeight client:load />
    <div
        class='wrapper-about-actus relative md:static overflow-hidden md:overflow-visible'
    >
        <AboutComponent about={about} lang={lang} client:load />
        <ActuComponent actus={actus} lang={lang} client:load />
    </div>
</Layout>
